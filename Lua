pcall(function()
    if game["Run Service"]:IsStudio() then
        game.Players.LocalPlayer:WaitForChild("PlayerGui"):WaitForChild("Synth UI"):Destroy()
    end
end)

local TweenService = game:GetService("TweenService")
local Run = game:GetService("RunService")

local Info = TweenInfo.new(0.1, Enum.EasingStyle.Sine)
local function Tween(Object, Properties, Info2)
    local Tw = TweenService:Create(Object, Info2 or Info, Properties)
    Tw:Play()
    return Tw
end

local lib = {
    Window = function(WindowName, Size)
        local Size = Size or UDim2.fromOffset(570, 340)
        
        local SynthUI = Instance.new("ScreenGui")
        local MainContainer = Instance.new("Frame")
        local Border = Instance.new("Frame")
        local RealContainer = Instance.new("Frame")
        local TopBar = Instance.new("Frame")
        local WindowTitle = Instance.new("TextLabel")
        local UICorner = Instance.new("UICorner")
        local NavBar = Instance.new("Frame")
        local UICorner_2 = Instance.new("UICorner")
        local TabsLabel = Instance.new("TextLabel")
        local CornerFix = Instance.new("Frame")
        local Tabs = Instance.new("ScrollingFrame")
        local UIListLayout = Instance.new("UIListLayout")
        local UICorner_3 = Instance.new("UICorner")
        local CornerArch = Instance.new("ImageLabel")
        local UICorner_4 = Instance.new("UICorner")
        local UIGradient_2 = Instance.new("UIGradient")
        local UICorner_5 = Instance.new("UICorner")
        local UICorner_6 = Instance.new("UICorner")

        SynthUI.Name = "Synth UI"
        SynthUI.Parent = Run:IsStudio() and game.Players.LocalPlayer.PlayerGui or game.CoreGui
        SynthUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
        SynthUI.ResetOnSpawn = false

        MainContainer.Name = "MainContainer"
        MainContainer.Parent = SynthUI
        MainContainer.AnchorPoint = Vector2.new(0.5, 0.5)
        MainContainer.BackgroundColor3 = Color3.fromRGB(44, 45, 44)
        MainContainer.BorderColor3 = Color3.fromRGB(0, 0, 0)
        MainContainer.BorderSizePixel = 0
        MainContainer.Position = UDim2.new(0.5, 0, 0.5, 0)
        MainContainer.Size = Size
        MainContainer.Active = true
        
        local function AddRipple(Button)
            local Clickbox
            if Button:IsA("TextButton") then 
                Clickbox = Button
            else
                Clickbox = Instance.new("TextButton", Button)
                Clickbox.Text = ""
                Clickbox.Size = UDim2.fromScale(1, 1)
                Clickbox.ZIndex = 2
                Clickbox.BackgroundTransparency = 1
            end
            Clickbox.MouseButton1Click:Connect(function()
                task.spawn(function()
                    local mouse = game.Players.LocalPlayer:GetMouse()
                    local Ripple = Instance.new("Frame", Button)
                    Ripple.Position = UDim2.fromOffset(mouse.X - Button.AbsolutePosition.X, mouse.Y - Button.AbsolutePosition.Y)
                    Ripple.BackgroundColor3 = Color3.fromRGB(33, 97, 200)
                    Ripple.Size = UDim2.fromOffset(0, 0)
                    Ripple.AnchorPoint = Vector2.new(0.5, 0.5)

                    local Corner = Instance.new("UICorner", Ripple)
                    Corner.CornerRadius = UDim.new(1, 0)

                    Tween(Ripple, {Size = UDim2.fromOffset(50, 50)}, TweenInfo.new(0.76, Enum.EasingStyle.Quint))
                    Tween(Ripple, {BackgroundTransparency = 1}, TweenInfo.new(0.76, Enum.EasingStyle.Quint))
                    game.Debris:AddItem(Ripple, 0.76)
                end)
            end)
            Button.ClipsDescendants = true
        end

        Border.Name = "Border"
        Border.Parent = MainContainer
        Border.AnchorPoint = Vector2.new(0.5, 0.5)
        Border.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        Border.BorderColor3 = Color3.fromRGB(0, 0, 0)
        Border.BorderSizePixel = 0
        Border.Position = UDim2.new(0.5, 0, 0.5, 0)
        Border.Size = UDim2.new(1, -8, 1, -8)

        RealContainer.Name = "RealContainer"
        RealContainer.Parent = Border
        RealContainer.AnchorPoint = Vector2.new(0.5, 0.5)
        RealContainer.BackgroundColor3 = Color3.fromRGB(44, 45, 44)
        RealContainer.BorderColor3 = Color3.fromRGB(0, 0, 0)
        RealContainer.BorderSizePixel = 0
        RealContainer.Position = UDim2.new(0.5, 0, 0.5, 0)
        RealContainer.Size = UDim2.new(1, -4, 1, -4)

        TopBar.Name = "TopBar"
        TopBar.Parent = RealContainer
        TopBar.BackgroundColor3 = Color3.fromRGB(39, 40, 39)
        TopBar.BorderColor3 = Color3.fromRGB(0, 0, 0)
        TopBar.BorderSizePixel = 0
        TopBar.Position = UDim2.new(0, 5, 0, 5)
        TopBar.Size = UDim2.new(1, -10, 0, 35)

        WindowTitle.Name = "WindowTitle"
        WindowTitle.Parent = TopBar
        WindowTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        WindowTitle.BackgroundTransparency = 1.000
        WindowTitle.BorderColor3 = Color3.fromRGB(0, 0, 0)
        WindowTitle.BorderSizePixel = 0
        WindowTitle.Position = UDim2.new(0, 10, 0, 5)
        WindowTitle.Size = UDim2.new(0, 200, 0, 25)
        WindowTitle.Font = Enum.Font.ArialBold
        WindowTitle.Text = WindowName or "Synth UI"
        WindowTitle.TextColor3 = Color3.fromRGB(220, 220, 220)
        WindowTitle.TextSize = 14.000
        WindowTitle.TextXAlignment = Enum.TextXAlignment.Left

        UICorner.CornerRadius = UDim.new(0, 6)
        UICorner.Parent = TopBar

        NavBar.Name = "NavBar"
        NavBar.Parent = RealContainer
        NavBar.BackgroundColor3 = Color3.fromRGB(39, 40, 39)
        NavBar.BorderColor3 = Color3.fromRGB(0, 0, 0)
        NavBar.BorderSizePixel = 0
        NavBar.Position = UDim2.new(0, 5, 0, 40)
        NavBar.Size = UDim2.new(0, 135, 1, -45)

        UICorner_2.CornerRadius = UDim.new(0, 6)
        UICorner_2.Parent = NavBar

        TabsLabel.Name = "TabsLabel"
        TabsLabel.Parent = NavBar
        TabsLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        TabsLabel.BackgroundTransparency = 1.000
        TabsLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
        TabsLabel.BorderSizePixel = 0
        TabsLabel.Position = UDim2.new(0, 5, 0, 5)
        TabsLabel.Size = UDim2.new(1, -10, 0, 20)
        TabsLabel.Font = Enum.Font.ArialBold
        TabsLabel.Text = "TABS"
        TabsLabel.TextColor3 = Color3.fromRGB(156, 156, 156)
        TabsLabel.TextSize = 14.000
        TabsLabel.TextXAlignment = Enum.TextXAlignment.Left

        CornerFix.Name = "CornerFix"
        CornerFix.Parent = NavBar
        CornerFix.AnchorPoint = Vector2.new(1, 0)
        CornerFix.BackgroundColor3 = Color3.fromRGB(39, 40, 39)
        CornerFix.BorderColor3 = Color3.fromRGB(0, 0, 0)
        CornerFix.BorderSizePixel = 0
        CornerFix.Position = UDim2.new(1, 0, 0, 0)
        CornerFix.Size = UDim2.new(0, 4, 0, 4)

        Tabs.Name = "Tabs"
        Tabs.Parent = NavBar
        Tabs.Active = true
        Tabs.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        Tabs.BackgroundTransparency = 1.000
        Tabs.BorderColor3 = Color3.fromRGB(0, 0, 0)
        Tabs.BorderSizePixel = 0
        Tabs.Position = UDim2.new(0, 5, 0, 30)
        Tabs.Size = UDim2.new(1, -10, 1, -35)
        Tabs.ScrollBarThickness = 3
        Tabs.ScrollBarImageColor3 = Color3.fromRGB(93, 93, 93)

        UIListLayout.Parent = Tabs
        UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
        UIListLayout.Padding = UDim.new(0, 3)

        UICorner_3.CornerRadius = UDim.new(0, 6)
        UICorner_3.Parent = RealContainer

        CornerArch.Name = "CornerArch"
        CornerArch.Parent = RealContainer
        CornerArch.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        CornerArch.BackgroundTransparency = 1.000
        CornerArch.BorderColor3 = Color3.fromRGB(0, 0, 0)
        CornerArch.BorderSizePixel = 0
        CornerArch.Position = UDim2.new(0, 137, 0, 37)
        CornerArch.Size = UDim2.new(0, 15, 0, 15)
        CornerArch.Image = "rbxassetid://117509933334518"
        CornerArch.ImageColor3 = Color3.fromRGB(39, 40, 39)
        CornerArch.Visible = false

        UIGradient_2.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(44, 174, 255)), ColorSequenceKeypoint.new(0.42, Color3.fromRGB(82, 212, 255)), ColorSequenceKeypoint.new(0.47, Color3.fromRGB(42, 92, 255)), ColorSequenceKeypoint.new(0.52, Color3.fromRGB(82, 212, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(123, 253, 255))}
        UIGradient_2.Rotation = -180
        UIGradient_2.Parent = Border

        UICorner_5.CornerRadius = UDim.new(0, 6)
        UICorner_5.Parent = Border

        UICorner_6.Parent = MainContainer

        do 
            local UIS = game:GetService("UserInputService")
            local function dragify(Drag, Frame)
                local dragToggle = nil
                local dragSpeed = 0.08
                local dragInput = nil
                local dragStart = nil
                local dragPos = nil
                local Delta, Position, startPos
                local function updateInput(input)
                    Delta = input.Position - dragStart
                    Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + Delta.X, startPos.Y.Scale, startPos.Y.Offset + Delta.Y)
                    game:GetService("TweenService"):Create(Frame, TweenInfo.new(dragSpeed), {Position = Position}):Play()
                end
                Drag.InputBegan:Connect(function(input)
                    if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and UIS:GetFocusedTextBox() == nil then
                        dragToggle = true
                        dragStart = input.Position
                        startPos = Frame.Position
                        input.Changed:Connect(function()
                            if input.UserInputState == Enum.UserInputState.End then
                                dragToggle = false
                            end
                        end)
                    end
                end)
                Drag.InputChanged:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
                        dragInput = input
                    end
                end)
                UIS.InputChanged:Connect(function(input)
                    if input == dragInput and dragToggle then
                        updateInput(input)
                    end
                end)
            end
            dragify(TopBar, MainContainer)
        end
        
        spawn(function()
            while task.wait() do
                local rotation = UIGradient_2.Rotation
                if rotation == 180 then
                    rotation = -181
                else    
                    rotation = rotation + 1
                end
                UIGradient_2.Rotation = rotation
            end
        end)
        
        local TabsTable = {}
        
        return {
            Tab = function(TabName)
                local TabFrame = Instance.new("Frame")
                local TextLabel = Instance.new("TextButton")
                local UIGradient = Instance.new("UIGradient")
                local TabContent = Instance.new("Frame")
                local ScrollingFrame = Instance.new("ScrollingFrame")
                local UIListLayout_2 = Instance.new("UIListLayout")
                
                TabFrame.Name = TabName
                TabFrame.Parent = Tabs
                TabFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                TabFrame.BackgroundTransparency = 1.000
                TabFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
                TabFrame.BorderSizePixel = 0
                TabFrame.Size = UDim2.new(1, 0, 0, 21)

                TextLabel.Parent = TabFrame
                TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                TextLabel.BackgroundTransparency = 1.000
                TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
                TextLabel.BorderSizePixel = 0
                TextLabel.Size = UDim2.new(1, 0, 1, 0)
                TextLabel.Font = Enum.Font.ArialBold
                TextLabel.Text = TabName
                TextLabel.TextColor3 = Color3.fromRGB(220, 220, 220)
                TextLabel.TextSize = 14.000
                TextLabel.TextXAlignment = Enum.TextXAlignment.Left

                UIGradient.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(44, 174, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(123, 253, 255))}
                UIGradient.Rotation = -180
                UIGradient.Parent = TextLabel
                UIGradient.Enabled = false
                
                TabContent.Name = "TabContent"
                TabContent.Parent = RealContainer
                TabContent.BackgroundColor3 = Color3.fromRGB(41, 42, 41)
                TabContent.BorderColor3 = Color3.fromRGB(0, 0, 0)
                TabContent.BorderSizePixel = 0
                TabContent.Position = UDim2.new(0, 147, 0, 47)
                TabContent.Size = UDim2.new(1, -160, 1, -57)
                TabContent.Visible = false

                UICorner_4.Parent = TabContent

                ScrollingFrame.Parent = TabContent
                ScrollingFrame.Active = true
                ScrollingFrame.AnchorPoint = Vector2.new(0.5, 0.5)
                ScrollingFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                ScrollingFrame.BackgroundTransparency = 1.000
                ScrollingFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
                ScrollingFrame.BorderSizePixel = 0
                ScrollingFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
                ScrollingFrame.Size = UDim2.new(1, -10, 1, -10)
                ScrollingFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
                ScrollingFrame.ScrollingDirection = Enum.ScrollingDirection.Y
                ScrollingFrame.ScrollBarImageColor3 = Color3.fromRGB(93, 93, 93)
                ScrollingFrame.BottomImage = "rbxasset://textures/ui/Scroll/scroll-middle.png"
                ScrollingFrame.TopImage = "rbxasset://textures/ui/Scroll/scroll-middle.png"
                ScrollingFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
                ScrollingFrame.CanvasSize = UDim2.fromScale(0, 0)

                UIListLayout_2.Parent = ScrollingFrame
                UIListLayout_2.SortOrder = Enum.SortOrder.LayoutOrder
                UIListLayout_2.Padding = UDim.new(0, 6)
                
                local Tcount = #TabsTable + 1
                local G = {
                    frame = TabFrame,
                    content = TabContent,
                }
                TabsTable[Tcount] = G
                
                local function onclick()
                    TabContent.Visible = true
                    UIGradient.Enabled = true
                    local Tw = Tween(TextLabel, {Position = UDim2.fromOffset(4, 0)})
                    Tw.Completed:Once(function(Playback)
                        Tween(TextLabel, {Position = UDim2.fromOffset(0, 0)})
                    end)
                    for i, Tab in pairs(TabsTable) do
                        if Tab ~= TabsTable[Tcount] then
                            Tween(Tab.frame.TextButton, {Position = UDim2.fromOffset(0, 0)})
                            Tab.frame.TextButton.UIGradient.Enabled = false
                            Tab.content.Visible = false
                        end
                    end
                end
                
                if Tcount == 1 then
                    onclick()
                end
                TextLabel.MouseButton1Click:Connect(onclick)
                
                return {
                    Section = function(SectionName, Alignment)
                        local Section = Instance.new("Frame")
                        local Section_2 = Instance.new("ImageLabel")
                        local UIGradient = Instance.new("UIGradient")
                        local TextLabel = Instance.new("TextLabel")
                        local Frame = Instance.new("ImageLabel")
                        local UIGradient_2 = Instance.new("UIGradient")

                        Section.Name = "Section"
                        Section.Parent = ScrollingFrame
                        Section.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                        Section.BackgroundTransparency = 1.000
                        Section.BorderColor3 = Color3.fromRGB(0, 0, 0)
                        Section.BorderSizePixel = 0
                        Section.Size = UDim2.new(1, -17, 0, 21)

                        Section_2.Name = "Section"
                        Section_2.Parent = Section
                        Section_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                        Section_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
                        Section_2.BorderSizePixel = 0
                        Section_2.Size = UDim2.new(1, 0, 0, 0)
                        Section_2.Image = "rbxassetid://115990690686320"
                        

                        UIGradient.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(71, 160, 255)), ColorSequenceKeypoint.new(0.50, Color3.fromRGB(51, 245, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(71, 160, 255))}
                        UIGradient.Parent = Section_2

                        TextLabel.Parent = Section_2
                        TextLabel.AnchorPoint = Vector2.new(0.5, 0)
                        TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                        TextLabel.BackgroundTransparency = 1.000
                        TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
                        TextLabel.BorderSizePixel = 0
                        TextLabel.Position = UDim2.new(0.5, 0, 0, 0)
                        TextLabel.Size = UDim2.new(1, 0, 0, 21)
                        TextLabel.Font = Enum.Font.ArialBold
                        TextLabel.Text = SectionName
                        TextLabel.TextColor3 = Color3.fromRGB(213, 213, 213)
                        TextLabel.TextSize = 14.000
                        TextLabel.TextStrokeColor3 = Color3.fromRGB(250, 250, 250)
                        TextLabel.TextXAlignment = Alignment or Enum.TextXAlignment.Center

                        Frame.Parent = TextLabel
                        Frame.AnchorPoint = Vector2.new(0, 1)
                        Frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                        Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
                        Frame.BorderSizePixel = 0
                        Frame.Position = UDim2.new(0, 0, 1, 0)
                        Frame.Size = UDim2.new(1, 0, 0, 3)
                        Frame.Image = "rbxassetid://115990690686320"
                        Frame.BackgroundTransparency = 1
                        UIGradient_2.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(71, 160, 255)), ColorSequenceKeypoint.new(0.50, Color3.fromRGB(51, 245, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(71, 160, 255))}
                        UIGradient_2.Parent = Frame
                        
                        return {
                            Label = function(Text, Alignment)
                                local Label = Instance.new("TextLabel")
                                Label.Parent = ScrollingFrame
                                Label.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
                                Label.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                Label.BorderSizePixel = 0
                                Label.Size = UDim2.new(1, -17, 0, 30)
                                Label.Font = Enum.Font.ArialBold
                                Label.Text = Text
                                Label.TextColor3 = Color3.fromRGB(255, 255, 255)
                                Label.TextSize = 14.000
                                Label.TextXAlignment = Alignment or Enum.TextXAlignment.Left
                                Label.BackgroundTransparency = 1
                                return Label
                            end,
                            Toggle = function(name, callback, default)
                                local Enabled = default or false
                                local Toggle = Instance.new("Frame")
                                local UICorner = Instance.new("UICorner")
                                local TextLabel = Instance.new("TextLabel")
                                local Frame = Instance.new("Frame")
                                local UICorner_2 = Instance.new("UICorner")
                                local Frame_2 = Instance.new("Frame")
                                local UICorner_3 = Instance.new("UICorner")

                                Toggle.Name = "Toggle"
                                Toggle.Parent = ScrollingFrame
                                Toggle.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
                                Toggle.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                Toggle.BorderSizePixel = 0
                                Toggle.Size = UDim2.new(1, -17, 0, 30)

                                TextLabel.Parent = Toggle
                                TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel.BackgroundTransparency = 1.000
                                TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                TextLabel.BorderSizePixel = 0
                                TextLabel.Position = UDim2.new(0, 8, 0, 0)
                                TextLabel.Size = UDim2.new(1, -100, 1, 0)
                                TextLabel.Font = Enum.Font.ArialBold
                                TextLabel.Text = name
                                TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel.TextSize = 14.000
                                TextLabel.TextXAlignment = Enum.TextXAlignment.Left

                                Frame.Parent = Toggle
                                Frame.AnchorPoint = Vector2.new(1, 0.5)
                                Frame.BackgroundColor3 = Color3.fromRGB(39, 40, 39)
                                Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                Frame.BorderSizePixel = 0
                                Frame.Position = UDim2.new(1, -8, 0.5, 0)
                                Frame.Size = UDim2.new(0, 50, 0, 21)

                                UICorner_2.CornerRadius = UDim.new(1, 0)
                                UICorner_2.Parent = Frame

                                Frame_2.Parent = Frame
                                Frame_2.AnchorPoint = Vector2.new(0, 0.5)
                                Frame_2.BackgroundColor3 = Color3.fromRGB(47, 148, 198)
                                Frame_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                Frame_2.BorderSizePixel = 0
                                Frame_2.Position = UDim2.new(0, 5, 0.5, 0)
                                Frame_2.Size = UDim2.new(0, 15, 0, 15)

                                UICorner_3.CornerRadius = UDim.new(1, 0)
                                UICorner_3.Parent = Frame_2
                                
                                if default then
                                    Frame.BackgroundColor3 = Color3.fromRGB(46, 47, 46)
                                    Frame_2.BackgroundColor3 = Color3.fromRGB(52, 164, 216)
                                    Frame_2.Position = UDim2.new(1, -20, 0.5, 0)
                                end
                                
                                local Clickbox = Instance.new("TextButton", Toggle)
                                Clickbox.Text = ""
                                Clickbox.Size = UDim2.fromScale(1, 1)
                                Clickbox.ZIndex = 2
                                Clickbox.BackgroundTransparency = 1
                                Clickbox.MouseButton1Click:Connect(function()
                                    Enabled = not Enabled
                                    local Tweens = {
                                        [true] = {
                                            function()
                                                Tween(Frame, {BackgroundColor3 = Color3.fromRGB(46, 47, 46)})
                                            end,
                                            function()
                                                Tween(Frame_2, {BackgroundColor3 = Color3.fromRGB(52, 164, 216), Position = UDim2.new(1, -20, 0.5, 0)})
                                            end,
                                        },
                                        [false] = {
                                            function()
                                                Tween(Frame, {BackgroundColor3 = Color3.fromRGB(39, 40, 39)})
                                            end,
                                            function()
                                                Tween(Frame_2, {BackgroundColor3 = Color3.fromRGB(47, 148, 198), Position = UDim2.new(0, 5, 0.5, 0)})
                                            end,
                                        }
                                    }
                                    for i, Tween in pairs(Tweens[Enabled]) do
                                        Tween()
                                    end
                                    callback(Enabled)
                                end)
                                
                                AddRipple(Clickbox)
                            end,
                            Button = function(name, callback)
                                local Button = Instance.new("Frame")
                                local UICorner = Instance.new("UICorner")
                                local TextLabel = Instance.new("TextLabel")

                                Button.Name = "Button"
                                Button.Parent = ScrollingFrame
                                Button.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
                                Button.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                Button.BorderSizePixel = 0
                                Button.Size = UDim2.new(1, -17, 0, 30)
                                Button.ClipsDescendants = true

                                TextLabel.Parent = Button
                                TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel.BackgroundTransparency = 1.000
                                TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                TextLabel.BorderSizePixel = 0
                                TextLabel.Size = UDim2.new(1, 0, 1, 0)
                                TextLabel.Font = Enum.Font.ArialBold
                                TextLabel.Text = name
                                TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel.TextSize = 14.000
                                TextLabel.TextXAlignment = Enum.TextXAlignment.Center
                                
                                local Clickbox = Instance.new("TextButton", Button)
                                Clickbox.Text = ""
                                Clickbox.Size = UDim2.fromScale(1, 1)
                                Clickbox.ZIndex = 2
                                Clickbox.BackgroundTransparency = 1
                                Clickbox.MouseButton1Click:Connect(function()
                                    (callback or function() end)()
                                end)
                                
                                AddRipple(Clickbox)
                            end,
                            Slider = function(name, min, max, def, callback)
                                local Slider = Instance.new("Frame")
                                local TextLabel = Instance.new("TextLabel")
                                local SliderName = Instance.new("TextLabel")
                                local Frame = Instance.new("Frame")
                                local UICorner = Instance.new("UICorner")
                                local Frame_2 = Instance.new("Frame")
                                local UICorner_2 = Instance.new("UICorner")
                                local TextLabel_2 = Instance.new("TextLabel")

                                Slider.Name = "Slider"
                                Slider.Parent = ScrollingFrame
                                Slider.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
                                Slider.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                Slider.BorderSizePixel = 0
                                Slider.Size = UDim2.new(1, -17, 0, 50)

                                SliderName.Name = "SliderName"
                                SliderName.Parent = Slider
                                SliderName.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                SliderName.BackgroundTransparency = 1.000
                                SliderName.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                SliderName.BorderSizePixel = 0
                                SliderName.Position = UDim2.new(0, 8, 0, 0)
                                SliderName.Size = UDim2.new(1, -16, 0, 20)
                                SliderName.Font = Enum.Font.ArialBold
                                SliderName.Text = name
                                SliderName.TextColor3 = Color3.fromRGB(255, 255, 255)
                                SliderName.TextSize = 14.000
                                SliderName.TextXAlignment = Enum.TextXAlignment.Left

                                Frame.Parent = Slider
                                Frame.AnchorPoint = Vector2.new(0.5, 0)
                                Frame.BackgroundColor3 = Color3.fromRGB(39, 40, 39)
                                Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                Frame.BorderSizePixel = 0
                                Frame.Position = UDim2.new(0.5, 0, 0, 25)
                                Frame.Size = UDim2.new(1, -16, 0, 15)

                                UICorner.CornerRadius = UDim.new(1, 0)
                                UICorner.Parent = Frame

                                Frame_2.Parent = Frame
                                Frame_2.BackgroundColor3 = Color3.fromRGB(47, 148, 198)
                                Frame_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                Frame_2.BorderSizePixel = 0
                                Frame_2.Size = UDim2.new((def-min)/(max-min), 0, 1, 0)

                                UICorner_2.CornerRadius = UDim.new(1, 0)
                                UICorner_2.Parent = Frame_2

                                TextLabel_2.Parent = Slider
                                TextLabel_2.AnchorPoint = Vector2.new(1, 0)
                                TextLabel_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel_2.BackgroundTransparency = 1.000
                                TextLabel_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                TextLabel_2.BorderSizePixel = 0
                                TextLabel_2.Position = UDim2.new(1, -8, 0, 25)
                                TextLabel_2.Size = UDim2.new(0, 50, 0, 15)
                                TextLabel_2.Font = Enum.Font.ArialBold
                                TextLabel_2.Text = tostring(def)
                                TextLabel_2.TextColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel_2.TextSize = 14.000
                                TextLabel_2.TextXAlignment = Enum.TextXAlignment.Right
                                
                                local MinText = Instance.new("TextLabel")
                                MinText.Parent = Slider
                                MinText.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                MinText.BackgroundTransparency = 1.000
                                MinText.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                MinText.BorderSizePixel = 0
                                MinText.Position = UDim2.new(0, 8, 0, 40)
                                MinText.Size = UDim2.new(0, 50, 0, 10)
                                MinText.Font = Enum.Font.Arial
                                MinText.Text = tostring(min)
                                MinText.TextColor3 = Color3.fromRGB(180, 180, 180)
                                MinText.TextSize = 12.000
                                MinText.TextXAlignment = Enum.TextXAlignment.Left
                                
                                local MaxText = Instance.new("TextLabel")
                                MaxText.Parent = Slider
                                MaxText.AnchorPoint = Vector2.new(1, 0)
                                MaxText.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                MaxText.BackgroundTransparency = 1.000
                                MaxText.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                MaxText.BorderSizePixel = 0
                                MaxText.Position = UDim2.new(1, -8, 0, 40)
                                MaxText.Size = UDim2.new(0, 50, 0, 10)
                                MaxText.Font = Enum.Font.Arial
                                MaxText.Text = tostring(max)
                                MaxText.TextColor3 = Color3.fromRGB(180, 180, 180)
                                MaxText.TextSize = 12.000
                                MaxText.TextXAlignment = Enum.TextXAlignment.Right

                                local ClickBox = Instance.new("TextButton")
                                ClickBox.Parent = Frame
                                ClickBox.Text = ""
                                ClickBox.BackgroundTransparency = 1
                                ClickBox.ZIndex = 1
                                ClickBox.Size = UDim2.fromScale(1, 1)
                                
                                local Dragging = false
                                local Last
                                ClickBox.MouseButton1Down:Connect(function()
                                    Dragging = true
                                    while Dragging do
                                        local Percent = math.clamp((game:GetService("Players").LocalPlayer:GetMouse().X - Frame.AbsolutePosition.X) / Frame.AbsoluteSize.X, 0, 1)
                                        local Value = min + (Percent*(max-min))
                                        TweenService:Create(Frame_2, TweenInfo.new(0.1, Enum.EasingStyle.Quint), {Size = UDim2.fromScale(Percent, 1)}):Play()
                                        if math.floor(Value) ~= Last then
                                            TextLabel_2.Text = math.floor(Value);
                                            Last = math.floor(Value);
                                            (callback or function() end)(math.floor(Value))
                                        end
                                        task.wait()
                                    end
                                end)
                                
                                game:GetService("UserInputService").InputEnded:Connect(function(Key)
                                    if Key.UserInputType == Enum.UserInputType.MouseButton1 or Key.UserInputType == Enum.UserInputType.Touch then
                                        Dragging = false
                                    end
                                end)
                            end,
                            Dropdown = function(name, array, default, callback)
                                local Dropdown = Instance.new("Frame")
                                local TextLabel = Instance.new("TextLabel")
                                local ImageLabel = Instance.new("ImageLabel")
                                local ScrollingFrame2 = Instance.new("ScrollingFrame")
                                local UIListLayout = Instance.new("UIListLayout")
                                local SelectedLabel = Instance.new("TextLabel")
                                
                                Dropdown.Name = "Dropdown"
                                Dropdown.Parent = ScrollingFrame
                                Dropdown.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
                                Dropdown.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                Dropdown.BorderSizePixel = 0
                                Dropdown.Size = UDim2.new(1, -17, 0, 30)
                                Dropdown.AutomaticSize = Enum.AutomaticSize.Y
                                Dropdown.ClipsDescendants = true

                                TextLabel.Parent = Dropdown
                                TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel.BackgroundTransparency = 1.000
                                TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                TextLabel.BorderSizePixel = 0
                                TextLabel.Position = UDim2.new(0, 8, 0, 0)
                                TextLabel.Size = UDim2.new(1, -100, 0, 30)
                                TextLabel.Font = Enum.Font.ArialBold
                                TextLabel.Text = name
                                TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel.TextSize = 14.000
                                TextLabel.TextXAlignment = Enum.TextXAlignment.Left

                                ImageLabel.Parent = Dropdown
                                ImageLabel.AnchorPoint = Vector2.new(1, 0.5)
                                ImageLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                ImageLabel.BackgroundTransparency = 1.000
                                ImageLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                ImageLabel.BorderSizePixel = 0
                                ImageLabel.Position = UDim2.new(1, -8, 0.5, 0)
                                ImageLabel.Size = UDim2.new(0, 20, 0, 20)
                                ImageLabel.Image = "rbxassetid://70441862151102"
                                ImageLabel.ImageColor3 = Color3.fromRGB(52, 164, 216)
                                ImageLabel.Rotation = 180

                                ScrollingFrame2.Parent = Dropdown
                                ScrollingFrame2.Active = true
                                ScrollingFrame2.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
                                ScrollingFrame2.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                ScrollingFrame2.BorderSizePixel = 0
                                ScrollingFrame2.Position = UDim2.new(0, 0, 0, 30)
                                ScrollingFrame2.Size = UDim2.new(1, 0, 0, 0)
                                ScrollingFrame2.CanvasSize = UDim2.new(0, 0, 0, 0)
                                ScrollingFrame2.ScrollBarThickness = 3
                                ScrollingFrame2.ScrollBarImageColor3 = Color3.fromRGB(93, 93, 93)
                                ScrollingFrame2.Visible = false

                                UIListLayout.Parent = ScrollingFrame2
                                UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

                                SelectedLabel.Parent = Dropdown
                                SelectedLabel.AnchorPoint = Vector2.new(1, 0)
                                SelectedLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                SelectedLabel.BackgroundTransparency = 1.000
                                SelectedLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                SelectedLabel.BorderSizePixel = 0
                                SelectedLabel.Position = UDim2.new(1, -35, 0, 0)
                                SelectedLabel.Size = UDim2.new(0, 100, 0, 30)
                                SelectedLabel.Font = Enum.Font.SourceSansBold
                                SelectedLabel.Text = tostring(default)
                                SelectedLabel.TextColor3 = Color3.fromRGB(52, 164, 216)
                                SelectedLabel.TextSize = 14.000
                                SelectedLabel.TextXAlignment = Enum.TextXAlignment.Right
                                
                                local IsOpen = false
                                local function ToggleDropdown()
                                    IsOpen = not IsOpen
                                    ImageLabel.Rotation = IsOpen and 0 or 180
                                    ScrollingFrame2.Visible = IsOpen
                                    
                                    if IsOpen then
                                        local totalHeight = 0
                                        for _, child in ipairs(ScrollingFrame2:GetChildren()) do
                                            if child:IsA("GuiObject") then
                                                totalHeight = totalHeight + child.Size.Y.Offset + UIListLayout.Padding.Offset
                                            end
                                        end
                                        ScrollingFrame2.Size = UDim2.new(1, 0, 0, math.min(totalHeight, 150))
                                        ScrollingFrame2.CanvasSize = UDim2.new(0, 0, 0, totalHeight)
                                        Dropdown.Size = UDim2.new(1, -17, 0, 30 + ScrollingFrame2.Size.Y.Offset)
                                    else
                                        ScrollingFrame2.Size = UDim2.new(1, 0, 0, 0)
                                        Dropdown.Size = UDim2.new(1, -17, 0, 30)
                                    end
                                end

                                for i,v in pairs(array) do
                                    local TextButton = Instance.new("TextButton")
                                    TextButton.Parent = ScrollingFrame2
                                    TextButton.BackgroundColor3 = Color3.fromRGB(39, 40, 39)
                                    TextButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                    TextButton.BorderSizePixel = 0
                                    TextButton.Size = UDim2.new(1, 0, 0, 21)
                                    TextButton.AutoButtonColor = false
                                    TextButton.Font = Enum.Font.SourceSans
                                    TextButton.Text = tostring(v)
                                    TextButton.TextColor3 = Color3.fromRGB(208, 208, 208)
                                    TextButton.TextSize = 14.000
                                    
                                    TextButton.MouseButton1Click:Connect(function()
                                        SelectedLabel.Text = tostring(v)
                                        callback(v)
                                        ToggleDropdown()
                                    end)
                                end
                                
                                local Clickbox = Instance.new("TextButton", Dropdown)
                                Clickbox.Text = ""
                                Clickbox.Size = UDim2.new(1, -17, 0, 30)
                                Clickbox.ZIndex = 2
                                Clickbox.BackgroundTransparency = 1
                                Clickbox.MouseButton1Click:Connect(ToggleDropdown)

                                AddRipple(Clickbox)
                            end,
                            TextBox = function(name, placeholder, callback)
                                local TextBoxFrame = Instance.new("Frame")
                                local TextLabel = Instance.new("TextLabel")
                                local TextBox = Instance.new("TextBox")
                                local UICorner = Instance.new("UICorner")
                                
                                TextBoxFrame.Name = "TextBoxFrame"
                                TextBoxFrame.Parent = ScrollingFrame
                                TextBoxFrame.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
                                TextBoxFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                TextBoxFrame.BorderSizePixel = 0
                                TextBoxFrame.Size = UDim2.new(1, -17, 0, 30)
                                
                                TextLabel.Parent = TextBoxFrame
                                TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel.BackgroundTransparency = 1.000
                                TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                TextLabel.BorderSizePixel = 0
                                TextLabel.Position = UDim2.new(0, 8, 0, 0)
                                TextLabel.Size = UDim2.new(0, 100, 1, 0)
                                TextLabel.Font = Enum.Font.ArialBold
                                TextLabel.Text = name
                                TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel.TextSize = 14.000
                                TextLabel.TextXAlignment = Enum.TextXAlignment.Left
                                
                                TextBox.Parent = TextBoxFrame
                                TextBox.AnchorPoint = Vector2.new(1, 0.5)
                                TextBox.BackgroundColor3 = Color3.fromRGB(39, 40, 39)
                                TextBox.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                TextBox.BorderSizePixel = 0
                                TextBox.Position = UDim2.new(1, -8, 0.5, 0)
                                TextBox.Size = UDim2.new(0, 150, 0, 21)
                                TextBox.Font = Enum.Font.SourceSans
                                TextBox.PlaceholderText = placeholder or ""
                                TextBox.Text = ""
                                TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
                                TextBox.TextSize = 14.000
                                
                                UICorner.Parent = TextBox
                                
                                TextBox.FocusLost:Connect(function(enterPressed)
                                    if enterPressed then
                                        callback(TextBox.Text)
                                    end
                                end)
                            end,
                            ColorPicker = function(name, default, callback)
                                local ColorPicker = Instance.new("Frame")
                                local TextLabel = Instance.new("TextLabel")
                                local Preview = Instance.new("Frame")
                                local UICorner = Instance.new("UICorner")
                                
                                ColorPicker.Name = "ColorPicker"
                                ColorPicker.Parent = ScrollingFrame
                                ColorPicker.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
                                ColorPicker.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                ColorPicker.BorderSizePixel = 0
                                ColorPicker.Size = UDim2.new(1, -17, 0, 30)
                                
                                TextLabel.Parent = ColorPicker
                                TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel.BackgroundTransparency = 1.000
                                TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                TextLabel.BorderSizePixel = 0
                                TextLabel.Position = UDim2.new(0, 8, 0, 0)
                                TextLabel.Size = UDim2.new(1, -100, 1, 0)
                                TextLabel.Font = Enum.Font.ArialBold
                                TextLabel.Text = name
                                TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                                TextLabel.TextSize = 14.000
                                TextLabel.TextXAlignment = Enum.TextXAlignment.Left
                                
                                Preview.Name = "Preview"
                                Preview.Parent = ColorPicker
                                Preview.AnchorPoint = Vector2.new(1, 0.5)
                                Preview.BackgroundColor3 = default or Color3.fromRGB(255, 0, 0)
                                Preview.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                Preview.BorderSizePixel = 0
                                Preview.Position = UDim2.new(1, -8, 0.5, 0)
                                Preview.Size = UDim2.new(0, 50, 0, 21)
                                
                                UICorner.Parent = Preview
                                
                                local ColorPickerFrame
                                local function OpenColorPicker()
                                    if ColorPickerFrame then
                                        ColorPickerFrame:Destroy()
                                    end
                                    
                                    ColorPickerFrame = Instance.new("Frame")
                                    ColorPickerFrame.Name = "ColorPickerFrame"
                                    ColorPickerFrame.Parent = ColorPicker
                                    ColorPickerFrame.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
                                    ColorPickerFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                    ColorPickerFrame.BorderSizePixel = 0
                                    ColorPickerFrame.Position = UDim2.new(0, 0, 1, 5)
                                    ColorPickerFrame.Size = UDim2.new(1, 0, 0, 150)
                                    ColorPickerFrame.ZIndex = 2
                                    
                                    local ColorWheel = Instance.new("ImageLabel")
                                    ColorWheel.Name = "ColorWheel"
                                    ColorWheel.Parent = ColorPickerFrame
                                    ColorWheel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                    ColorWheel.BackgroundTransparency = 1.000
                                    ColorWheel.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                    ColorWheel.BorderSizePixel = 0
                                    ColorWheel.Position = UDim2.new(0, 5, 0, 5)
                                    ColorWheel.Size = UDim2.new(0, 140, 0, 140)
                                    ColorWheel.Image = "rbxassetid://14284884301"
                                    ColorWheel.ZIndex = 2
                                    
                                    local Selector = Instance.new("Frame")
                                    Selector.Name = "Selector"
                                    Selector.Parent = ColorWheel
                                    Selector.AnchorPoint = Vector2.new(0.5, 0.5)
                                    Selector.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                    Selector.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                    Selector.BorderSizePixel = 2
                                    Selector.Size = UDim2.new(0, 10, 0, 10)
                                    Selector.ZIndex = 3
                                    
                                    local UICorner = Instance.new("UICorner")
                                    UICorner.Parent = Selector
                                    UICorner.CornerRadius = UDim.new(1, 0)
                                    
                                    local BrightnessSlider = Instance.new("Frame")
                                    BrightnessSlider.Name = "BrightnessSlider"
                                    BrightnessSlider.Parent = ColorPickerFrame
                                    BrightnessSlider.BackgroundColor3 = Color3.fromRGB(39, 40, 39)
                                    BrightnessSlider.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                    BrightnessSlider.BorderSizePixel = 0
                                    BrightnessSlider.Position = UDim2.new(0, 150, 0, 5)
                                    BrightnessSlider.Size = UDim2.new(0, 20, 0, 140)
                                    BrightnessSlider.ZIndex = 2
                                    
                                    local UICorner_2 = Instance.new("UICorner")
                                    UICorner_2.Parent = BrightnessSlider
                                    
                                    local BrightnessGradient = Instance.new("UIGradient")
                                    BrightnessGradient.Name = "BrightnessGradient"
                                    BrightnessGradient.Parent = BrightnessSlider
                                    BrightnessGradient.Rotation = 90
                                    BrightnessGradient.Color = ColorSequence.new{
                                        ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
                                        ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 0, 0))
                                    }
                                    
                                    local BrightnessSelector = Instance.new("Frame")
                                    BrightnessSelector.Name = "BrightnessSelector"
                                    BrightnessSelector.Parent = BrightnessSlider
                                    BrightnessSelector.AnchorPoint = Vector2.new(0.5, 0.5)
                                    BrightnessSelector.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                                    BrightnessSelector.BorderColor3 = Color3.fromRGB(0, 0, 0)
                                    BrightnessSelector.BorderSizePixel = 2
                                    BrightnessSelector.Position = UDim2.new(0.5, 0, 0.5, 0)
                                    BrightnessSelector.Size = UDim2.new(1, 4, 0, 10)
                                    BrightnessSelector.ZIndex = 3
                                    
                                    local UICorner_3 = Instance.new("UICorner")
                                    UICorner_3.Parent = BrightnessSelector
                                    
                                    local CurrentColor = Preview.BackgroundColor3
                                    local Hue, Saturation, Value = Color3.toHSV(CurrentColor)
                                    
                                    local function UpdateColor()
                                        CurrentColor = Color3.fromHSV(Hue, Saturation, Value)
                                        Preview.BackgroundColor3 = CurrentColor
                                        callback(CurrentColor)
                                    end
                                    
                                    local function UpdateSelectorPosition()
                                        local X = (Hue * 0.75 + 0.125) * ColorWheel.AbsoluteSize.X
                                        local Y = (1 - Saturation) * ColorWheel.AbsoluteSize.Y
                                        Selector.Position = UDim2.new(0, X - Selector.AbsoluteSize.X/2, 0, Y - Selector.AbsoluteSize.Y/2)
                                    end
                                    
                                    local function UpdateBrightnessPosition()
                                        BrightnessSelector.Position = UDim2.new(0.5, 0, 1 - Value, 0)
                                    end
                                    
                                    UpdateSelectorPosition()
                                    UpdateBrightnessPosition()
                                    
                                    local ColorWheelConnection
                                    ColorWheelConnection = ColorWheel.InputBegan:Connect(function(input)
                                        if input.UserInputType == Enum.UserInputType.MouseButton1 then
                                            local Mouse = game:GetService("Players").LocalPlayer:GetMouse()
                                            local function Update()
                                                local X = math.clamp(Mouse.X - ColorWheel.AbsolutePosition.X, 0, ColorWheel.AbsoluteSize.X)
                                                local Y = math.clamp(Mouse.Y - ColorWheel.AbsolutePosition.Y, 0, ColorWheel.AbsoluteSize.Y)
                                                
                                                Hue = ((X / ColorWheel.AbsoluteSize.X) - 0.125) / 0.75
                                                Saturation = 1 - (Y / ColorWheel.AbsoluteSize.Y)
                                                
                                                Hue = math.clamp(Hue, 0, 1)
                                                Saturation = math.clamp(Saturation, 0, 1)
                                                
                                                UpdateSelectorPosition()
                                                UpdateColor()
                                            end
                                            
                                            Update()
                                            
                                            local MoveConnection
                                            MoveConnection = Mouse.Move:Connect(function()
                                                Update()
                                            end)
                                            
                                            local ReleaseConnection
                                            ReleaseConnection = input.Changed:Connect(function()
                                                if input.UserInputState == Enum.UserInputState.End then
                                                    MoveConnection:Disconnect()
                                                    ReleaseConnection:Disconnect()
                                                end
                                            end)
                                        end
                                    end)
                                    
                                    local BrightnessConnection
                                    BrightnessConnection = BrightnessSlider.InputBegan:Connect(function(input)
                                        if input.UserInputType == Enum.UserInputType.MouseButton1 then
                                            local Mouse = game:GetService("Players").LocalPlayer:GetMouse()
                                            local function Update()
                                                local Y = math.clamp(Mouse.Y - BrightnessSlider.AbsolutePosition.Y, 0, BrightnessSlider.AbsoluteSize.Y)
                                                Value = 1 - (Y / BrightnessSlider.AbsoluteSize.Y)
                                                Value = math.clamp(Value, 0, 1)
                                                
                                                UpdateBrightnessPosition()
                                                UpdateColor()
                                            end
                                            
                                            Update()
                                            
                                            local MoveConnection
                                            MoveConnection = Mouse.Move:Connect(function()
                                                Update()
                                            end)
                                            
                                            local ReleaseConnection
                                            ReleaseConnection = input.Changed:Connect(function()
                                                if input.UserInputState == Enum.UserInputState.End then
                                                    MoveConnection:Disconnect()
                                                    ReleaseConnection:Disconnect()
                                                end
                                            end)
                                        end
                                    end)
                                    
                                    local CloseConnection
                                    CloseConnection = game:GetService("UserInputService").InputBegan:Connect(function(input, processed)
                                        if not processed and input.UserInputType == Enum.UserInputType.MouseButton1 then
                                            if not (ColorPickerFrame:IsDescendantOf(game) and (Mouse.X >= ColorPickerFrame.AbsolutePosition.X and Mouse.X <= ColorPickerFrame.AbsolutePosition.X + ColorPickerFrame.AbsoluteSize.X and Mouse.Y >= ColorPickerFrame.AbsolutePosition.Y and Mouse.Y <= ColorPickerFrame.AbsolutePosition.Y + ColorPickerFrame.AbsoluteSize.Y)) then
                                                ColorPickerFrame:Destroy()
                                                ColorWheelConnection:Disconnect()
                                                BrightnessConnection:Disconnect()
                                                CloseConnection:Disconnect()
                                            end
                                        end
                                    end)
                                end
                                
                                local Clickbox = Instance.new("TextButton", Preview)
                                Clickbox.Text = ""
                                Clickbox.Size = UDim2.fromScale(1, 1)
                                Clickbox.ZIndex = 2
                                Clickbox.BackgroundTransparency = 1
                                Clickbox.MouseButton1Click:Connect(OpenColorPicker)
                                
                                return {
                                    SetColor = function(color)
                                        Preview.BackgroundColor3 = color
                                        local H, S, V = Color3.toHSV(color)
                                        Hue, Saturation, Value = H, S, V
                                    end
                                }
                            end
                        }
                    end,
                }
            end,
        }
    end,
}

return lib
